<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIäº‹ä»¶åˆ›å»ºæµ‹è¯•</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
        }
        .test-button {
            background: #007AFF;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
        }
        .test-button:hover {
            background: #0056B3;
        }
        .success {
            color: #28a745;
            font-weight: bold;
        }
        .error {
            color: #dc3545;
            font-weight: bold;
        }
        .result {
            margin-top: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 5px;
            border-left: 4px solid #007AFF;
        }
        .console-log {
            background: #000;
            color: #00ff00;
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ§ª AIäº‹ä»¶åˆ›å»ºåŠŸèƒ½æµ‹è¯•</h1>
        
        <div class="test-section">
            <h2>ğŸ“‹ æµ‹è¯•è¯´æ˜</h2>
            <p>è¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æµ‹è¯•AIäº‹ä»¶åˆ›å»ºåŠŸèƒ½ï¼š</p>
            <ol>
                <li>æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰æŸ¥çœ‹è¯¦ç»†æ—¥å¿—</li>
                <li>åœ¨ä¸»åº”ç”¨ä¸­ä½¿ç”¨AIèŠå¤©åŠŸèƒ½</li>
                <li>å°è¯•ä»¥ä¸‹æµ‹è¯•æŒ‡ä»¤</li>
            </ol>
        </div>

        <div class="test-section">
            <h2>ğŸ¯ å»ºè®®æµ‹è¯•æŒ‡ä»¤</h2>
            <div>
                <button class="test-button" onclick="copyToClipboard('æ˜å¤©ä¸‹åˆ2ç‚¹å¼€ä¸ªé¡¹ç›®ä¼šè®®ï¼Œ1å°æ—¶')">
                    ğŸ“… åŸºç¡€äº‹ä»¶åˆ›å»º
                </button>
                <button class="test-button" onclick="copyToClipboard('ä¸‹å‘¨ä¸€æ—©ä¸Šå®‰æ’å›¢é˜Ÿç«™ä¼šï¼Œ30åˆ†é’Ÿ')">
                    ğŸ•˜ å‘¨æœŸäº‹ä»¶
                </button>
                <button class="test-button" onclick="copyToClipboard('ä»Šå¤©æ™šä¸Š7ç‚¹åœ¨æ˜Ÿå·´å…‹å’Œå®¢æˆ·è§é¢')">
                    ğŸ“ å¸¦åœ°ç‚¹äº‹ä»¶
                </button>
                <button class="test-button" onclick="copyToClipboard('ä¸‹ä¸ªæœˆ15å·å®‰æ’äº§å“å‘å¸ƒä¼šï¼Œ2å°æ—¶ï¼Œé‡è¦')">
                    â­ é‡è¦äº‹ä»¶
                </button>
            </div>
            <div class="result" id="copyResult" style="display: none;">
                <span class="success">âœ… æŒ‡ä»¤å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼è¯·åœ¨AIèŠå¤©æ¡†ä¸­ç²˜è´´ä½¿ç”¨</span>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸ”§ æµ‹è¯•æ­¥éª¤</h2>
            <ol>
                <li><strong>å‰å¾€åº”ç”¨</strong>ï¼šæ‰“å¼€ <a href="http://localhost:5174" target="_blank">http://localhost:5174</a></li>
                <li><strong>è¿›å…¥Dashboard</strong>ï¼šç‚¹å‡»AIèŠå¤©æ¡†</li>
                <li><strong>æµ‹è¯•åˆ›å»ºäº‹ä»¶</strong>ï¼šä½¿ç”¨ä¸Šé¢çš„æµ‹è¯•æŒ‡ä»¤</li>
                <li><strong>éªŒè¯åŒæ­¥</strong>ï¼šæ£€æŸ¥äº‹ä»¶æ˜¯å¦å‡ºç°åœ¨ï¼š
                    <ul>
                        <li>æ—¥å†è§†å›¾ï¼ˆåˆ‡æ¢åˆ°Calendaré¡µé¢ï¼‰</li>
                        <li>å¾…åŠäº‹é¡¹åˆ—è¡¨</li>
                        <li>Dashboardçš„å°æ—¥å†</li>
                    </ul>
                </li>
                <li><strong>è·¨é¡µé¢æµ‹è¯•</strong>ï¼šåœ¨Calendaré¡µé¢çš„AIèŠå¤©ä¸­ä¹Ÿåˆ›å»ºäº‹ä»¶</li>
            </ol>
        </div>

        <div class="test-section">
            <h2>âœ… é¢„æœŸç»“æœ</h2>
            <ul>
                <li>âœ… AIæˆåŠŸè§£æè‡ªç„¶è¯­è¨€æŒ‡ä»¤</li>
                <li>âœ… äº‹ä»¶åœ¨æ—¥å†ä¸­æ­£ç¡®æ˜¾ç¤º</li>
                <li>âœ… åŒæ­¥åˆ°å¾…åŠäº‹é¡¹åˆ—è¡¨</li>
                <li>âœ… è·¨é¡µé¢å®æ—¶åŒæ­¥</li>
                <li>âœ… æ§åˆ¶å°æ˜¾ç¤ºè¯¦ç»†åˆ›å»ºæ—¥å¿—</li>
                <li>âœ… æ˜¾ç¤ºæˆåŠŸé€šçŸ¥æ¶ˆæ¯</li>
            </ul>
        </div>

        <div class="test-section">
            <h2>ğŸ› æ•…éšœæ’æŸ¥</h2>
            <div>
                <button class="test-button" onclick="checkLocalStorage()">
                    ğŸ“¦ æ£€æŸ¥æœ¬åœ°å­˜å‚¨
                </button>
                <button class="test-button" onclick="checkEventCount()">
                    ğŸ“Š æ£€æŸ¥äº‹ä»¶æ•°é‡
                </button>
                <button class="test-button" onclick="clearAllData()">
                    ğŸ—‘ï¸ æ¸…ç©ºæµ‹è¯•æ•°æ®
                </button>
            </div>
            <div id="debugResult" class="result" style="display: none;"></div>
        </div>

        <div class="test-section">
            <h2>ğŸ“ æ§åˆ¶å°æ—¥å¿—ç›‘æ§</h2>
            <p>é‡è¦æ—¥å¿—å…³é”®è¯ï¼š</p>
            <div class="console-log">
AIæ­£åœ¨è°ƒç”¨autoScheduleEvent
CalendarService.createEvent è¢«è°ƒç”¨
åˆ›å»ºçš„äº‹ä»¶å¯¹è±¡:
äº‹ä»¶æ·»åŠ åˆ°æ•°ç»„åï¼Œæ€»äº‹ä»¶æ•°:
Dashboard AIæˆåŠŸåˆ›å»ºäº‹ä»¶:
è§¦å‘å…¨å±€äº‹ä»¶æ›´æ–°é€šçŸ¥
æ¥æ”¶åˆ°å…¨å±€äº‹ä»¶æ›´æ–°:
âœ… äº‹ä»¶åˆ›å»ºæˆåŠŸï¼</div>
        </div>
    </div>

    <script>
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                const result = document.getElementById('copyResult');
                result.style.display = 'block';
                setTimeout(() => {
                    result.style.display = 'none';
                }, 3000);
            });
        }

        function checkLocalStorage() {
            const events = localStorage.getItem('calendar_events');
            const todos = localStorage.getItem('todos');
            const result = document.getElementById('debugResult');
            
            let content = '<h3>ğŸ“¦ æœ¬åœ°å­˜å‚¨çŠ¶æ€</h3>';
            content += `<p><strong>æ—¥å†äº‹ä»¶:</strong> ${events ? JSON.parse(events).length + ' ä¸ªäº‹ä»¶' : 'æ— æ•°æ®'}</p>`;
            content += `<p><strong>å¾…åŠäº‹é¡¹:</strong> ${todos ? JSON.parse(todos).length + ' ä¸ªä»»åŠ¡' : 'æ— æ•°æ®'}</p>`;
            
            if (events) {
                const eventList = JSON.parse(events);
                content += '<h4>æœ€è¿‘çš„äº‹ä»¶:</h4><ul>';
                eventList.slice(-5).forEach(event => {
                    content += `<li>${event.title} - ${new Date(event.startTime).toLocaleString()}</li>`;
                });
                content += '</ul>';
            }
            
            result.innerHTML = content;
            result.style.display = 'block';
        }

        function checkEventCount() {
            const events = localStorage.getItem('calendar_events');
            const result = document.getElementById('debugResult');
            
            if (events) {
                const eventList = JSON.parse(events);
                result.innerHTML = `
                    <h3>ğŸ“Š äº‹ä»¶ç»Ÿè®¡</h3>
                    <p class="success">æ€»äº‹ä»¶æ•°: ${eventList.length}</p>
                    <p>ä»Šå¤©çš„äº‹ä»¶: ${eventList.filter(e => {
                        const eventDate = new Date(e.startTime).toDateString();
                        const today = new Date().toDateString();
                        return eventDate === today;
                    }).length}</p>
                `;
            } else {
                result.innerHTML = '<p class="error">âŒ æœªæ‰¾åˆ°ä»»ä½•äº‹ä»¶æ•°æ®</p>';
            }
            result.style.display = 'block';
        }

        function clearAllData() {
            localStorage.removeItem('calendar_events');
            localStorage.removeItem('todos');
            localStorage.removeItem('chatHistory');
            
            const result = document.getElementById('debugResult');
            result.innerHTML = '<p class="success">âœ… æ‰€æœ‰æµ‹è¯•æ•°æ®å·²æ¸…ç©º</p>';
            result.style.display = 'block';
        }

        // ç›‘å¬å…¨å±€äº‹ä»¶æ›´æ–°
        window.addEventListener('calendarEventsUpdated', (event) => {
            console.log('æµ‹è¯•é¡µé¢æ¥æ”¶åˆ°å…¨å±€äº‹ä»¶æ›´æ–°:', event.detail);
        });
    </script>
</body>
</html> 